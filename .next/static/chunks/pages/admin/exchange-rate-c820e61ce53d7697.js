(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7342],{303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AmpStateContext",{enumerable:!0,get:function(){return a}});let a=r(4252)._(r(4232)).default.createContext({})},756:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(4232);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),l=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},d=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:p,...x}=e;return(0,a.createElement)("svg",{ref:t,...o,width:n,height:n,stroke:r,strokeWidth:l?24*Number(s)/Number(n):s,className:d("lucide",c),...!u&&!i(x)&&{"aria-hidden":"true"},...x},[...p.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{className:i,...o}=r;return(0,a.createElement)(c,{ref:s,iconNode:t,className:d("lucide-".concat(n(l(e))),"lucide-".concat(e),i),...o})});return r.displayName=l(e),r}},3776:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let a=r(4232),n=a.useLayoutEffect,s=a.useEffect;function l(e){let{headManager:t,reduceComponentsToState:r}=e;function l(){if(t&&t.mountedInstances){let n=a.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(r(n,e))}}return n(()=>{var r;return null==t||null==(r=t.mountedInstances)||r.add(e.children),()=>{var r;null==t||null==(r=t.mountedInstances)||r.delete(e.children)}}),n(()=>(t&&(t._pendingUpdate=l),()=>{t&&(t._pendingUpdate=l)})),s(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},4065:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(756).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5679:(e,t,r)=>{"use strict";var a=r(5364);Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return f},defaultHead:function(){return p}});let n=r(4252),s=r(8365),l=r(7876),d=s._(r(4232)),i=n._(r(3776)),o=r(303),c=r(8831),u=r(6807);function p(e){void 0===e&&(e=!1);let t=[(0,l.jsx)("meta",{charSet:"utf-8"},"charset")];return e||t.push((0,l.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),t}function x(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===d.default.Fragment?e.concat(d.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}r(6079);let m=["name","httpEquiv","charSet","itemProp"];function h(e,t){let{inAmpMode:r}=t;return e.reduce(x,[]).reverse().concat(p(r).reverse()).filter(function(){let e=new Set,t=new Set,r=new Set,a={};return n=>{let s=!0,l=!1;if(n.key&&"number"!=typeof n.key&&n.key.indexOf("$")>0){l=!0;let t=n.key.slice(n.key.indexOf("$")+1);e.has(t)?s=!1:e.add(t)}switch(n.type){case"title":case"base":t.has(n.type)?s=!1:t.add(n.type);break;case"meta":for(let e=0,t=m.length;e<t;e++){let t=m[e];if(n.props.hasOwnProperty(t))if("charSet"===t)r.has(t)?s=!1:r.add(t);else{let e=n.props[t],r=a[t]||new Set;("name"!==t||!l)&&r.has(e)?s=!1:(r.add(e),a[t]=r)}}}return s}}()).reverse().map((e,t)=>{let n=e.key||t;if(a.env.__NEXT_OPTIMIZE_FONTS&&!r&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some(t=>e.props.href.startsWith(t))){let t={...e.props||{}};return t["data-href"]=t.href,t.href=void 0,t["data-optimized-fonts"]=!0,d.default.cloneElement(e,t)}return d.default.cloneElement(e,{key:n})})}let f=function(e){let{children:t}=e,r=(0,d.useContext)(o.AmpStateContext),a=(0,d.useContext)(c.HeadManagerContext);return(0,l.jsx)(i.default,{reduceComponentsToState:h,headManager:a,inAmpMode:(0,u.isInAmpMode)(r),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6079:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},6807:(e,t)=>{"use strict";function r(e){let{ampFirst:t=!1,hybrid:r=!1,hasQuery:a=!1}=void 0===e?{}:e;return t||r&&a}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return r}})},7328:(e,t,r)=>{e.exports=r(5679)},8156:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/exchange-rate",function(){return r(8483)}])},8483:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__N_SSP:()=>m,default:()=>h});var a=r(7876),n=r(4232),s=r(4065),l=r(756);let d=(0,l.A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),i=(0,l.A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),o=(0,l.A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),c=(0,l.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function u(){let[e,t]=(0,n.useState)(null),[r,l]=(0,n.useState)(""),[u,p]=(0,n.useState)(!0),[x,m]=(0,n.useState)(!1),[h,f]=(0,n.useState)(null),[g,b]=(0,n.useState)(0),[y,j]=(0,n.useState)(null);(0,n.useEffect)(()=>{v()},[]);let v=async()=>{try{p(!0);let e=await fetch("/api/exchange-rate");if(!e.ok)throw Error("Impossible de charger le taux");let r=await e.json();t(r.rate),l(r.rate.toString()),r.updatedAt&&f(new Date(r.updatedAt))}catch(e){console.error("Erreur:",e),j({type:"error",text:"Impossible de charger le taux"})}finally{p(!1)}},N=async()=>{try{let e=parseFloat(r);if(!e||e<=0)return void j({type:"error",text:"Le taux doit \xeatre un nombre positif"});m(!0);let a=await fetch("/api/exchange-rate",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({rate:e})});if(!a.ok){let e=await a.json();throw Error(e.message||"Erreur lors de la mise \xe0 jour")}let n=await a.json();n.medicationsUpdated&&(b(n.medicationsUpdated),t(e),f(new Date),j({type:"success",text:"Taux mis \xe0 jour! ".concat(n.medicationsUpdated," m\xe9dicaments recalcul\xe9s")}))}catch(e){console.error("Erreur:",e),j({type:"error",text:e.message||"Erreur lors de la mise \xe0 jour"})}finally{m(!1)}},w=e&&parseFloat(r)?parseFloat(r)-e:0,_=e&&0!==w?(w/e*100).toFixed(2):"0";return u?(0,a.jsx)("div",{className:"w-full bg-white rounded-lg border p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(s.A,{className:"h-6 w-6 animate-spin"})})}):(0,a.jsxs)("div",{className:"w-full bg-white rounded-lg border p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,a.jsx)(d,{className:"h-5 w-5"}),"Taux de Change USD â†’ CDF"]}),(0,a.jsx)("p",{className:"text-gray-600",children:"G\xe9rez le taux de change pour la conversion automatique des prix"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border border-blue-200",children:[(0,a.jsx)("p",{className:"text-sm text-blue-600 mb-1",children:"Taux Actuel"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-blue-900",children:[null==e?void 0:e.toLocaleString()," CDF"]}),(0,a.jsx)("p",{className:"text-xs text-blue-500 mt-2",children:"1 USD"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border border-green-200",children:[(0,a.jsx)("p",{className:"text-sm text-green-600 mb-1",children:"M\xe9dicaments Affect\xe9s"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-900",children:g}),(0,a.jsx)("p",{className:"text-xs text-green-500 mt-2",children:"Convertis avec ce taux"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200",children:[(0,a.jsx)("p",{className:"text-sm text-purple-600 mb-1",children:"Derni\xe8re Mise \xe0 Jour"}),(0,a.jsx)("p",{className:"text-sm font-mono text-purple-900",children:null==h?void 0:h.toLocaleDateString("fr-FR")}),(0,a.jsx)("p",{className:"text-xs text-purple-500 mt-2",children:null==h?void 0:h.toLocaleTimeString("fr-FR")})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"newRate",className:"block text-sm font-medium mb-2",children:"Nouveau Taux (CDF/USD)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{id:"newRate",type:"number",step:"0.01",value:r,onChange:e=>l(e.target.value),placeholder:"Entrez le nouveau taux",disabled:x,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md"}),(0,a.jsxs)("button",{onClick:N,disabled:x||!r,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-md flex items-center gap-2",children:[x?(0,a.jsx)(s.A,{className:"h-4 w-4 animate-spin"}):null,"Mettre \xe0 Jour"]})]})]}),0!==w&&(0,a.jsx)("div",{className:"flex items-center gap-2 text-sm",children:w>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i,{className:"h-4 w-4 text-green-600"}),(0,a.jsxs)("span",{className:"text-green-600",children:["+",w.toFixed(2)," CDF (",_,"%)"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{className:"h-4 w-4 text-red-600"}),(0,a.jsxs)("span",{className:"text-red-600",children:[w.toFixed(2)," CDF (",_,"%)"]})]})})]}),y&&(0,a.jsx)("div",{className:"success"===y.type?"bg-green-50 border border-green-200 p-4 rounded-lg":"bg-red-50 border border-red-200 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c,{className:"success"===y.type?"h-4 w-4 text-green-600":"h-4 w-4 text-red-600"}),(0,a.jsx)("p",{className:"success"===y.type?"text-green-800":"text-red-800",children:y.text})]})}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,a.jsx)("strong",{children:"Info:"})," Quand vous mettez \xe0 jour le taux, tous les prix en CDF des produits seront recalcul\xe9s automatiquement en fonction de leurs prix USD de r\xe9f\xe9rence."]})})]})}var p=r(7328),x=r.n(p),m=!0;function h(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x(),{children:(0,a.jsx)("title",{children:"Gestion du Taux de Change | AfrikaPharma"})}),(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 p-8",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsx)(u,{})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,6593,8792],()=>t(8156)),_N_E=e.O()}]);