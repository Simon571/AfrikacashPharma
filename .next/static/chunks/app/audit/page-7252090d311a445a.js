(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2494],{8080:(e,s,a)=>{Promise.resolve().then(a.bind(a,9005))},9005:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});var l=a(5155),t=a(2115);let c=async()=>{let e=await fetch("/api/admin/audit",{credentials:"include"});return await e.json()};function n(){let[e,s]=(0,t.useState)([]),[a,n]=(0,t.useState)(!0);return(0,t.useEffect)(()=>{c().then(e=>{s(e.logs||[]),n(!1)})},[]),(0,l.jsxs)("main",{className:"max-w-4xl mx-auto p-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Historique des actions"}),a?(0,l.jsx)("div",{children:"Chargement..."}):(0,l.jsxs)("table",{className:"min-w-full border rounded shadow",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"bg-gray-100",children:[(0,l.jsx)("th",{className:"px-3 py-2",children:"Date"}),(0,l.jsx)("th",{className:"px-3 py-2",children:"Utilisateur"}),(0,l.jsx)("th",{className:"px-3 py-2",children:"Action"}),(0,l.jsx)("th",{className:"px-3 py-2",children:"Mod\xe8le"}),(0,l.jsx)("th",{className:"px-3 py-2",children:"ID"}),(0,l.jsx)("th",{className:"px-3 py-2",children:"Ancien"}),(0,l.jsx)("th",{className:"px-3 py-2",children:"Nouveau"})]})}),(0,l.jsx)("tbody",{children:0===e.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:7,className:"text-center p-4",children:"Aucune action"})}):e.map((e,s)=>{var a;return(0,l.jsxs)("tr",{className:"border-b",children:[(0,l.jsx)("td",{className:"px-3 py-2",children:new Date(e.timestamp).toLocaleString()}),(0,l.jsx)("td",{className:"px-3 py-2",children:(null==(a=e.user)?void 0:a.username)||"-"}),(0,l.jsx)("td",{className:"px-3 py-2",children:e.action}),(0,l.jsx)("td",{className:"px-3 py-2",children:e.model}),(0,l.jsx)("td",{className:"px-3 py-2",children:e.recordId}),(0,l.jsx)("td",{className:"px-3 py-2",children:e.oldValue||"-"}),(0,l.jsx)("td",{className:"px-3 py-2",children:e.newValue||"-"})]},s)})})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[8441,1684,7358],()=>s(8080)),_N_E=e.O()}]);