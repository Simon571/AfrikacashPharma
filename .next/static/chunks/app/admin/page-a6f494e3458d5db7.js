(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{1568:(e,t,n)=>{Promise.resolve().then(n.bind(n,4989))},4989:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var a=n(5155),i=n(2115);function s(e){let{initialClients:t}=e,[n,s]=(0,i.useState)(t||[]),[c,l]=(0,i.useState)("");async function r(e){e.preventDefault();let t=await fetch("/api/admin/clients",{method:"POST",body:JSON.stringify({name:c}),headers:{"Content-Type":"application/json"}}),n=await t.json();n.client&&s(e=>[n.client,...e]),l("")}async function d(e,t){let n=await fetch("/api/admin/clients",{method:"PATCH",body:JSON.stringify({clientId:e,action:"ACTIVE"===t?"suspend":"activate"}),headers:{"Content-Type":"application/json"}}),a=await n.json();a.client&&s(e=>e.map(e=>e.id===a.client.id?a.client:e))}async function o(e){let t=await fetch("/api/admin/clients?clientId=".concat(e),{method:"DELETE"});(await t.json()).ok&&s(t=>t.filter(t=>t.id!==e))}async function h(e){let t=await fetch("/api/admin/licenses",{method:"POST",body:JSON.stringify({clientId:e}),headers:{"Content-Type":"application/json"}}),n=await t.json();n.key&&alert("Licence g\xe9n\xe9r\xe9e: "+n.key)}return(0,a.jsxs)("div",{children:[(0,a.jsxs)("form",{onSubmit:r,className:"mb-4",children:[(0,a.jsx)("input",{value:c,onChange:e=>l(e.target.value),placeholder:"Nom de la pharmacie",className:"border p-2 mr-2"}),(0,a.jsx)("button",{className:"bg-blue-600 text-white p-2",children:"Cr\xe9er"})]}),(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left",children:"Nom"}),(0,a.jsx)("th",{children:"Contact"}),(0,a.jsx)("th",{children:"Statut"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:n.map(e=>(0,a.jsxs)("tr",{className:"border-t",children:[(0,a.jsx)("td",{children:e.name}),(0,a.jsx)("td",{children:e.contactEmail||e.contactPhone||"-"}),(0,a.jsx)("td",{children:e.status}),(0,a.jsxs)("td",{children:[(0,a.jsx)("button",{onClick:()=>d(e.id,e.status),className:"mr-2",children:"ACTIVE"===e.status?"Suspendre":"Activer"}),(0,a.jsx)("button",{onClick:()=>h(e.id),className:"mr-2",children:"G\xe9n\xe9rer Licence"}),(0,a.jsx)("button",{onClick:()=>o(e.id),className:"text-red-600",children:"Supprimer"})]})]},e.id))})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1684,7358],()=>t(1568)),_N_E=e.O()}]);