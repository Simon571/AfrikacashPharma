(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7732],{1331:(t,e,n)=>{Promise.resolve().then(n.bind(n,8982))},5127:(t,e,n)=>{"use strict";n.d(e,{A0:()=>s,BF:()=>i,Hj:()=>c,XI:()=>l,nA:()=>d,nd:()=>o});var r=n(5155);n(2115);var a=n(9434);function l(t){let{className:e,...n}=t;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...n})})}function s(t){let{className:e,...n}=t;return(0,r.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...n})}function i(t){let{className:e,...n}=t;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...n})}function c(t){let{className:e,...n}=t;return(0,r.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...n})}function o(t){let{className:e,...n}=t;return(0,r.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n})}function d(t){let{className:e,...n}=t;return(0,r.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n})}},8982:(t,e,n)=>{"use strict";n.d(e,{SalesHistory:()=>i});var r=n(5155),a=n(2115),l=n(5127),s=n(9434);function i(){let[t,e]=(0,a.useState)([]);return(0,a.useEffect)(()=>{(async()=>{try{let t=await fetch("/api/sales",{cache:"no-store"});if(!t.ok)throw Error("HTTP "+t.status);let n=await t.json();e(n)}catch(t){console.error("Failed to fetch sales history",t)}})()},[]),(0,r.jsxs)(l.XI,{children:[(0,r.jsx)(l.A0,{children:(0,r.jsxs)(l.Hj,{children:[(0,r.jsx)(l.nd,{children:"Client"}),(0,r.jsx)(l.nd,{children:"Vendeur"}),(0,r.jsx)(l.nd,{children:"Total"}),(0,r.jsx)(l.nd,{children:"Date"}),(0,r.jsx)(l.nd,{children:"M\xe9dicaments"})]})}),(0,r.jsx)(l.BF,{children:t.map(t=>{var e,n;return(0,r.jsxs)(l.Hj,{children:[(0,r.jsx)(l.nA,{children:t.client.name}),(0,r.jsx)(l.nA,{children:null!=(n=null==(e=t.seller)?void 0:e.username)?n:"â€”"}),(0,r.jsx)(l.nA,{children:(0,s.vv)(t.totalAmount)}),(0,r.jsx)(l.nA,{children:new Date(t.date).toLocaleString()}),(0,r.jsx)(l.nA,{children:t.items&&t.items.map(t=>(0,r.jsxs)("div",{children:[t.medication.name," (x",t.quantity,")"]},t.id))})]},t.id)})})]})}},9434:(t,e,n)=>{"use strict";n.d(e,{M_:()=>i,cn:()=>l,vv:()=>s});var r=n(2596),a=n(9688);function l(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return(0,a.QP)((0,r.$)(e))}function s(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"CDF",n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=new Intl.NumberFormat("fr-CD",{minimumFractionDigits:0,maximumFractionDigits:0}).format(t);if("CDF"===e)return"".concat(r).concat(n?" CDF":"");if("USD"===e){let e=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t);return"".concat(e).concat(n?" USD":"")}return r}function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2400;return t/e}}},t=>{var e=e=>t(t.s=e);t.O(0,[9039,8441,1684,7358],()=>e(1331)),_N_E=t.O()}]);