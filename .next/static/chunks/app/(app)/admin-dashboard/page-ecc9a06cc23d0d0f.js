(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[862],{1414:(e,t,r)=>{"use strict";e.exports=r(2436)},2436:(e,t,r)=>{"use strict";var n=r(2115),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useState,i=n.useEffect,d=n.useLayoutEffect,o=n.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),s=n[0].inst,c=n[1];return d(function(){s.value=r,s.getSnapshot=t,l(s)&&c({inst:s})},[e,r,t]),i(function(){return l(s)&&c({inst:s}),e(function(){l(s)&&c({inst:s})})},[e]),o(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},2601:(e,t,r)=>{"use strict";r.d(t,{ReorderSuggestions:()=>o});var n=r(5155),s=r(2115),a=r(6695),i=r(5127),d=r(6671);function o(){let[e,t]=(0,s.useState)([]),[r,o]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/medications/reorder-suggestions");if(e.ok){let r=await e.json();t(r)}else d.oR.error("Erreur lors du chargement des suggestions de r\xe9approvisionnement.")}catch(e){console.error("Failed to fetch reorder suggestions:",e),d.oR.error("Erreur r\xe9seau lors du chargement des suggestions de r\xe9approvisionnement.")}finally{o(!1)}})()},[]),r)?(0,n.jsx)("p",{children:"Chargement des suggestions de r\xe9approvisionnement..."}):(0,n.jsxs)(a.Zp,{children:[(0,n.jsx)(a.aR,{children:(0,n.jsx)(a.ZB,{children:"Suggestions de R\xe9approvisionnement"})}),(0,n.jsx)(a.Wu,{children:0===e.length?(0,n.jsx)("p",{children:"Aucune suggestion de r\xe9approvisionnement pour le moment."}):(0,n.jsxs)(i.XI,{children:[(0,n.jsx)(i.A0,{children:(0,n.jsxs)(i.Hj,{children:[(0,n.jsx)(i.nd,{children:"M\xe9dicament"}),(0,n.jsx)(i.nd,{children:"Stock Actuel"}),(0,n.jsx)(i.nd,{children:"Ventes Moy. Jour."}),(0,n.jsx)(i.nd,{children:"Quantit\xe9 Sugg\xe9r\xe9e"}),(0,n.jsx)(i.nd,{children:"Raison"})]})}),(0,n.jsx)(i.BF,{children:e.map(e=>(0,n.jsxs)(i.Hj,{children:[(0,n.jsx)(i.nA,{children:e.name}),(0,n.jsx)(i.nA,{children:e.currentQuantity}),(0,n.jsx)(i.nA,{children:e.dailyAverageSold}),(0,n.jsx)(i.nA,{children:e.suggestedOrderQuantity}),(0,n.jsx)(i.nA,{children:e.reason})]},e.id))})]})})]})}},3385:(e,t,r)=>{"use strict";r.d(t,{StaleMedicationsAlert:()=>o});var n=r(5155),s=r(2115),a=r(6695),i=r(5127),d=r(6671);function o(){let[e,t]=(0,s.useState)([]),[r,o]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/medications/stale-medications");if(e.ok){let r=await e.json();t(r)}else d.oR.error("Erreur lors du chargement des m\xe9dicaments non vendus.")}catch(e){console.error("Failed to fetch stale medications:",e),d.oR.error("Erreur r\xe9seau lors du chargement des m\xe9dicaments non vendus.")}finally{o(!1)}})()},[]),r)?(0,n.jsx)("p",{children:"Chargement des alertes de m\xe9dicaments non vendus..."}):0===e.length?null:(0,n.jsxs)(a.Zp,{className:"border-orange-500",children:[(0,n.jsx)(a.aR,{children:(0,n.jsx)(a.ZB,{className:"text-orange-600",children:"M\xe9dicaments non vendus (90+ jours)"})}),(0,n.jsxs)(a.Wu,{children:[(0,n.jsx)("p",{className:"mb-2",children:"Les m\xe9dicaments suivants n'ont pas \xe9t\xe9 vendus depuis 90 jours ou plus :"}),(0,n.jsxs)(i.XI,{children:[(0,n.jsx)(i.A0,{children:(0,n.jsxs)(i.Hj,{children:[(0,n.jsx)(i.nd,{children:"M\xe9dicament"}),(0,n.jsx)(i.nd,{children:"Code-barres"}),(0,n.jsx)(i.nd,{children:"Date d'ajout"})]})}),(0,n.jsx)(i.BF,{children:e.map(e=>(0,n.jsxs)(i.Hj,{children:[(0,n.jsx)(i.nA,{children:e.name}),(0,n.jsx)(i.nA,{children:e.barcode}),(0,n.jsx)(i.nA,{children:new Date(e.createdAt).toLocaleDateString()})]},e.id))})]})]})]})}},4011:(e,t,r)=>{"use strict";r.d(t,{Fallback:()=>A,Image:()=>S,Root:()=>y});var n=r(2115),s=r(6081),a=r(9033),i=r(2712),d=r(3655),o=r(1414);function l(){return()=>{}}var c=r(5155),u="Avatar",[h,m]=(0,s.A)(u),[x,j]=h(u),f=n.forwardRef((e,t)=>{let{__scopeAvatar:r,...s}=e,[a,i]=n.useState("idle");return(0,c.jsx)(x,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:(0,c.jsx)(d.sG.span,{...s,ref:t})})});f.displayName=u;var p="AvatarImage",g=n.forwardRef((e,t)=>{let{__scopeAvatar:r,src:s,onLoadingStatusChange:u=()=>{},...h}=e,m=j(p,r),x=function(e,t){let{referrerPolicy:r,crossOrigin:s}=t,a=(0,o.useSyncExternalStore)(l,()=>!0,()=>!1),d=n.useRef(null),c=a?(d.current||(d.current=new window.Image),d.current):null,[u,h]=n.useState(()=>w(c,e));return(0,i.N)(()=>{h(w(c,e))},[c,e]),(0,i.N)(()=>{let e=e=>()=>{h(e)};if(!c)return;let t=e("loaded"),n=e("error");return c.addEventListener("load",t),c.addEventListener("error",n),r&&(c.referrerPolicy=r),"string"==typeof s&&(c.crossOrigin=s),()=>{c.removeEventListener("load",t),c.removeEventListener("error",n)}},[c,s,r]),u}(s,h),f=(0,a.c)(e=>{u(e),m.onImageLoadingStatusChange(e)});return(0,i.N)(()=>{"idle"!==x&&f(x)},[x,f]),"loaded"===x?(0,c.jsx)(d.sG.img,{...h,ref:t,src:s}):null});g.displayName=p;var v="AvatarFallback",b=n.forwardRef((e,t)=>{let{__scopeAvatar:r,delayMs:s,...a}=e,i=j(v,r),[o,l]=n.useState(void 0===s);return n.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(e)}},[s]),o&&"loaded"!==i.imageLoadingStatus?(0,c.jsx)(d.sG.span,{...a,ref:t}):null});function w(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}b.displayName=v;var y=f,S=g,A=b},4222:(e,t,r)=>{Promise.resolve().then(r.bind(r,4011)),Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.bind(r,7206)),Promise.resolve().then(r.bind(r,2601)),Promise.resolve().then(r.bind(r,3385)),Promise.resolve().then(r.bind(r,162))},4783:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]])},5127:(e,t,r)=>{"use strict";r.d(t,{A0:()=>i,BF:()=>d,Hj:()=>o,XI:()=>a,nA:()=>c,nd:()=>l});var n=r(5155);r(2115);var s=r(9434);function a(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,n.jsx)("table",{"data-slot":"table",className:(0,s.cn)("w-full caption-bottom text-sm",t),...r})})}function i(e){let{className:t,...r}=e;return(0,n.jsx)("thead",{"data-slot":"table-header",className:(0,s.cn)("[&_tr]:border-b",t),...r})}function d(e){let{className:t,...r}=e;return(0,n.jsx)("tbody",{"data-slot":"table-body",className:(0,s.cn)("[&_tr:last-child]:border-0",t),...r})}function o(e){let{className:t,...r}=e;return(0,n.jsx)("tr",{"data-slot":"table-row",className:(0,s.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...r})}function l(e){let{className:t,...r}=e;return(0,n.jsx)("th",{"data-slot":"table-head",className:(0,s.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}function c(e){let{className:t,...r}=e;return(0,n.jsx)("td",{"data-slot":"table-cell",className:(0,s.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}},6474:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},7206:(e,t,r)=>{"use strict";r.d(t,{ExpirationCalendar:()=>o});var n=r(5155),s=r(2115),a=r(6695),i=r(5127),d=r(6671);function o(){let[e,t]=(0,s.useState)([]),[r,o]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/medications");if(e.ok){let r=await e.json();t(r)}else d.oR.error("Erreur lors du chargement des m\xe9dicaments.")}catch(e){console.error("Failed to fetch medications:",e),d.oR.error("Erreur r\xe9seau lors du chargement des m\xe9dicaments.")}finally{o(!1)}})()},[]);let l=e=>{let t=new Date,r=Math.ceil((new Date(e).getTime()-t.getTime())/864e5);return r<=30?{status:"Rouge",className:"text-red-600 font-bold"}:r<=60?{status:"Orange",className:"text-orange-500 font-bold"}:{status:"Vert",className:"text-green-600"}};if(r)return(0,n.jsx)("p",{children:"Chargement du calendrier des expirations..."});let c=[...e].sort((e,t)=>new Date(e.expirationDate).getTime()-new Date(t.expirationDate).getTime());return(0,n.jsxs)(a.Zp,{children:[(0,n.jsx)(a.aR,{children:(0,n.jsx)(a.ZB,{children:"Calendrier des Expirations"})}),(0,n.jsx)(a.Wu,{children:0===c.length?(0,n.jsx)("p",{children:"Aucun m\xe9dicament \xe0 afficher dans le calendrier des expirations."}):(0,n.jsxs)(i.XI,{children:[(0,n.jsx)(i.A0,{children:(0,n.jsxs)(i.Hj,{children:[(0,n.jsx)(i.nd,{children:"M\xe9dicament"}),(0,n.jsx)(i.nd,{children:"Date d'expiration"}),(0,n.jsx)(i.nd,{children:"Statut"})]})}),(0,n.jsx)(i.BF,{children:c.map(e=>{let{status:t,className:r}=l(e.expirationDate);return(0,n.jsxs)(i.Hj,{children:[(0,n.jsx)(i.nA,{children:e.name}),(0,n.jsx)(i.nA,{children:new Date(e.expirationDate).toLocaleDateString()}),(0,n.jsx)(i.nA,{className:r,children:t})]},e.id)})})]})})]})}},7863:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(9946).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[9039,7471,8595,1071,9221,7456,8441,1684,7358],()=>t(4222)),_N_E=e.O()}]);