(()=>{var e={};e.id=3698,e.ids=[3698],e.modules={1132:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var n=r(37413);r(61120);var a=r(57635);async function s(){let e=await fetch(`${process.env.NEXT_PUBLIC_APP_URL||"http://localhost:3000"}/api/admin/clients`,{cache:"no-store"}),t=await e.json();return(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Console Super-Admin"}),(0,n.jsx)(a.default,{initialClients:t.clients||[]})]})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31441:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var n=r(60687),a=r(43210);function s({initialClients:e}){let[t,r]=(0,a.useState)(e||[]),[s,i]=(0,a.useState)("");async function o(e){e.preventDefault();let t=await fetch("/api/admin/clients",{method:"POST",body:JSON.stringify({name:s}),headers:{"Content-Type":"application/json"}}),n=await t.json();n.client&&r(e=>[n.client,...e]),i("")}async function l(e,t){let n=await fetch("/api/admin/clients",{method:"PATCH",body:JSON.stringify({clientId:e,action:"ACTIVE"===t?"suspend":"activate"}),headers:{"Content-Type":"application/json"}}),a=await n.json();a.client&&r(e=>e.map(e=>e.id===a.client.id?a.client:e))}async function c(e){let t=await fetch(`/api/admin/clients?clientId=${e}`,{method:"DELETE"});(await t.json()).ok&&r(t=>t.filter(t=>t.id!==e))}async function d(e){let t=await fetch("/api/admin/licenses",{method:"POST",body:JSON.stringify({clientId:e}),headers:{"Content-Type":"application/json"}}),r=await t.json();r.key&&alert("Licence g\xe9n\xe9r\xe9e: "+r.key)}return(0,n.jsxs)("div",{children:[(0,n.jsxs)("form",{onSubmit:o,className:"mb-4",children:[(0,n.jsx)("input",{value:s,onChange:e=>i(e.target.value),placeholder:"Nom de la pharmacie",className:"border p-2 mr-2"}),(0,n.jsx)("button",{className:"bg-blue-600 text-white p-2",children:"Cr\xe9er"})]}),(0,n.jsxs)("table",{className:"w-full border-collapse",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"text-left",children:"Nom"}),(0,n.jsx)("th",{children:"Contact"}),(0,n.jsx)("th",{children:"Statut"}),(0,n.jsx)("th",{children:"Actions"})]})}),(0,n.jsx)("tbody",{children:t.map(e=>(0,n.jsxs)("tr",{className:"border-t",children:[(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.contactEmail||e.contactPhone||"-"}),(0,n.jsx)("td",{children:e.status}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{onClick:()=>l(e.id,e.status),className:"mr-2",children:"ACTIVE"===e.status?"Suspendre":"Activer"}),(0,n.jsx)("button",{onClick:()=>d(e.id),className:"mr-2",children:"G\xe9n\xe9rer Licence"}),(0,n.jsx)("button",{onClick:()=>c(e.id),className:"text-red-600",children:"Supprimer"})]})]},e.id))})]})]})}},33873:e=>{"use strict";e.exports=require("path")},38625:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>c});var n=r(65239),a=r(48088),s=r(88170),i=r.n(s),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1132)),"C:\\Users\\Public\\Documents\\Console Afrikapharma\\AfrikaPharma\\src\\app\\admin\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\Public\\Documents\\Console Afrikapharma\\AfrikaPharma\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["C:\\Users\\Public\\Documents\\Console Afrikapharma\\AfrikaPharma\\src\\app\\admin\\page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new n.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},40821:(e,t,r)=>{Promise.resolve().then(r.bind(r,57635))},57635:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Public\\\\Documents\\\\Console Afrikapharma\\\\AfrikaPharma\\\\src\\\\components\\\\admin\\\\ClientList.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Public\\Documents\\Console Afrikapharma\\AfrikaPharma\\src\\components\\admin\\ClientList.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},79551:e=>{"use strict";e.exports=require("url")},82677:(e,t,r)=>{Promise.resolve().then(r.bind(r,31441))}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[4243,6915,1422,1658,9853],()=>r(38625));module.exports=n})();