(()=>{var e={};e.id=2286,e.ids=[2286],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},86616:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>v,routeModule:()=>m,serverHooks:()=>h,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>w});var t={};s.r(t),s.d(t,{GET:()=>d,POST:()=>l});var a=s(96559),n=s(48088),u=s(37719),o=s(32190),i=s(96330),p=s(85663);let c=new i.PrismaClient;async function d(){try{await c.user.deleteMany();let e=await p.Ay.hash("admin123",12),r=await p.Ay.hash("vendeur123",12);await c.user.create({data:{username:"admin",passwordHash:e,role:"admin"}}),await c.user.create({data:{username:"vendeur",passwordHash:r,role:"seller"}});let s=await c.user.findMany();return o.NextResponse.json({success:!0,message:"Utilisateurs cr\xe9\xe9s",users:s.map(e=>({id:e.id,username:e.username,role:e.role}))})}catch(e){return console.error("Erreur cr\xe9ation utilisateurs:",e),o.NextResponse.json({error:"Erreur serveur"},{status:500})}}async function l(e){try{let{username:r,password:s,role:t}=await e.json(),a=await c.user.findUnique({where:{username:r}});if(!a)return o.NextResponse.json({error:"Utilisateur non trouv\xe9"},{status:401});if(a.role!==t)return o.NextResponse.json({error:"R\xf4le incorrect"},{status:401});if(!await p.Ay.compare(s,a.passwordHash))return o.NextResponse.json({error:"Mot de passe incorrect"},{status:401});return o.NextResponse.json({success:!0,user:{id:a.id,username:a.username,role:a.role}})}catch(e){return console.error("Erreur test login:",e),o.NextResponse.json({error:"Erreur serveur"},{status:500})}}let m=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/setup-users/route",pathname:"/api/setup-users",filename:"route",bundlePath:"app/api/setup-users/route"},resolvedPagePath:"C:\\Users\\Public\\Documents\\Console Afrikapharma\\AfrikaPharma\\src\\app\\api\\setup-users\\route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:x,workUnitAsyncStorage:w,serverHooks:h}=m;function v(){return(0,u.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:w})}},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[4243,580,5663],()=>s(86616));module.exports=t})();