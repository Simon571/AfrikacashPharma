{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Public/Documents/AfrikaPharma/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\n\ndeclare global {\n  // allow global `var` declarations\n  \n  var prisma: PrismaClient | undefined;\n}\n\nexport const prisma = global.prisma || new PrismaClient();\n\nif (process.env.NODE_ENV !== 'production') global.prisma = prisma;\n"],"names":[],"mappings":";;;AAAA;;AAQO,MAAM,SAAS,OAAO,MAAM,IAAI,IAAI,6HAAA,CAAA,eAAY;AAEvD,wCAA2C,OAAO,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Public/Documents/AfrikaPharma/src/lib/actions/exchange-rate.ts"],"sourcesContent":["'use server';\r\n\r\nimport { prisma } from '@/lib/prisma';\r\nimport { revalidatePath } from 'next/cache';\r\n\r\nconst DEFAULT_RATE = 2400; // Taux par défaut\r\nconst CURRENCY_KEY = 'USD_CDF';\r\n\r\n/**\r\n * Récupère le taux de change actuel USD→CDF\r\n */\r\nexport async function getExchangeRate() {\r\n  try {\r\n    const client = prisma as unknown as {\r\n      exchangeRate: {\r\n        findUnique: (args: unknown) => Promise<{ id: string; rate: number; updatedAt: Date } | null>;\r\n        create: (args: unknown) => Promise<{ id: string; rate: number; updatedAt: Date }>;\r\n      };\r\n    };\r\n\r\n    const existing = await client.exchangeRate.findUnique({ where: { currency: CURRENCY_KEY } });\r\n    if (existing) {\r\n      return existing;\r\n    }\r\n\r\n    return client.exchangeRate.create({\r\n      data: {\r\n        currency: CURRENCY_KEY,\r\n        rate: DEFAULT_RATE,\r\n      },\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération du taux:', error);\r\n    return { id: '', rate: DEFAULT_RATE, currency: CURRENCY_KEY, createdAt: new Date(), updatedAt: new Date() };\r\n  }\r\n}\r\n\r\n/**\r\n * Met à jour le taux de change et recalcule tous les prix en CDF\r\n */\r\nexport async function updateExchangeRate(newRate: number, updatedBy?: string) {\r\n  try {\r\n    if (!newRate || newRate <= 0) {\r\n      throw new Error('Le taux doit être un nombre positif.');\r\n    }\r\n\r\n    const client = prisma as unknown as {\r\n      exchangeRate: {\r\n        findUnique: (args: unknown) => Promise<{ id: string; rate: number; updatedAt: Date } | null>;\r\n        upsert: (args: unknown) => Promise<{ id: string; rate: number; updatedAt: Date }>;\r\n      };\r\n      medication: {\r\n        findMany: (args: unknown) => Promise<Array<Record<string, unknown>>>;\r\n        update: (args: unknown) => Promise<void>;\r\n      };\r\n      auditLog: {\r\n        create: (args: unknown) => Promise<void>;\r\n      };\r\n    };\r\n\r\n    const existing = await client.exchangeRate.findUnique({\r\n      where: { currency: CURRENCY_KEY },\r\n    });\r\n    const currentRate = existing?.rate ?? DEFAULT_RATE;\r\n\r\n    const exchangeRecord = await client.exchangeRate.upsert({\r\n      where: { currency: CURRENCY_KEY },\r\n      create: {\r\n        currency: CURRENCY_KEY,\r\n        rate: newRate,\r\n      },\r\n      update: {\r\n        rate: newRate,\r\n      },\r\n    });\r\n\r\n    const medications = await client.medication.findMany({\r\n      select: {\r\n        id: true,\r\n        price: true,\r\n        purchasePrice: true,\r\n        priceUsd: true,\r\n        purchasePriceUsd: true,\r\n      },\r\n    });\r\n\r\n    let medicationsUpdated = 0;\r\n    const CHUNK_SIZE = 50;\r\n\r\n    for (let start = 0; start < medications.length; start += CHUNK_SIZE) {\r\n      const slice = medications.slice(start, start + CHUNK_SIZE);\r\n\r\n      const updates = slice.map((medication) => {\r\n        const med = medication as unknown as {\r\n          id: string;\r\n          price: number;\r\n          purchasePrice: number;\r\n          priceUsd?: number | null;\r\n          purchasePriceUsd?: number | null;\r\n        };\r\n\r\n        const baseSalesUsd =\r\n          med.priceUsd && med.priceUsd > 0 ? med.priceUsd : (med.price || 0) / currentRate;\r\n        const basePurchaseUsd =\r\n          med.purchasePriceUsd && med.purchasePriceUsd > 0\r\n            ? med.purchasePriceUsd\r\n            : (med.purchasePrice || 0) / currentRate;\r\n\r\n        return client.medication.update({\r\n          where: { id: med.id },\r\n          data: {\r\n            priceUsd: Math.round(baseSalesUsd * 100) / 100,\r\n            purchasePriceUsd: Math.round(basePurchaseUsd * 100) / 100,\r\n            price: Math.round(baseSalesUsd * newRate * 100) / 100,\r\n            purchasePrice: Math.round(basePurchaseUsd * newRate * 100) / 100,\r\n          },\r\n        });\r\n      });\r\n\r\n      await Promise.all(updates);\r\n      medicationsUpdated += slice.length;\r\n    }\r\n\r\n    if (updatedBy) {\r\n      try {\r\n        await client.auditLog.create({\r\n          data: {\r\n            action: 'exchange_rate_update',\r\n            model: 'ExchangeRate',\r\n            recordId: exchangeRecord.id,\r\n            userId: updatedBy,\r\n            oldValue: existing ? JSON.stringify({ rate: existing.rate }) : null,\r\n            newValue: JSON.stringify({ rate: newRate, medicationsUpdated }),\r\n          },\r\n        });\r\n      } catch (auditError) {\r\n        console.warn(\"Impossible d'enregistrer le journal d'audit:\", auditError);\r\n      }\r\n    }\r\n\r\n    revalidatePath('/admin/inventory');\r\n    revalidatePath('/admin');\r\n    revalidatePath('/(app)/medications');\r\n\r\n    return { ...exchangeRecord, medicationsUpdated };\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise à jour du taux:', error);\r\n    throw error;\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Public/Documents/AfrikaPharma/src/lib/actions/medications.ts"],"sourcesContent":["\n'use server';\n\nimport { prisma } from '@/lib/prisma';\ninterface MedicationPayload {\n  name: string;\n  pharmaceuticalForm: string;\n  purchasePrice: number;\n  purchasePriceUsd?: number | null;\n  price: number;\n  priceUsd?: number | null;\n  quantity: number;\n  expirationDate: Date;\n  barcode?: string | null;\n  isAvailableForSale: boolean;\n}\n\nexport async function getMedications() {\n  return await prisma.medication.findMany();\n}\n\nexport async function createMedication(data: MedicationPayload) {\n  return await prisma.medication.create({\n    data: {\n      ...data,\n      barcode: data.barcode ?? null,\n      purchasePriceUsd: data.purchasePriceUsd ?? 0,\n      priceUsd: data.priceUsd ?? 0,\n    } as any,\n  });\n}\n\nexport async function updateMedication(id: string, data: Partial<MedicationPayload>) {\n  return await prisma.medication.update({\n    where: { id },\n    data: {\n      ...data,\n      barcode: data.barcode ?? undefined,\n      purchasePriceUsd: data.purchasePriceUsd ?? undefined,\n      priceUsd: data.priceUsd ?? undefined,\n    } as any,\n  });\n}\n\nexport async function deleteMedication(id: string) {\n  return await prisma.medication.delete({ where: { id } });\n}\n"],"names":[],"mappings":";;;;;;;;AAGA;;;;;AAcO,eAAe;IACpB,OAAO,MAAM,oHAAA,CAAA,SAAM,CAAC,UAAU,CAAC,QAAQ;AACzC;AAEO,eAAe,iBAAiB,IAAuB;IAC5D,OAAO,MAAM,oHAAA,CAAA,SAAM,CAAC,UAAU,CAAC,MAAM,CAAC;QACpC,MAAM;YACJ,GAAG,IAAI;YACP,SAAS,KAAK,OAAO,IAAI;YACzB,kBAAkB,KAAK,gBAAgB,IAAI;YAC3C,UAAU,KAAK,QAAQ,IAAI;QAC7B;IACF;AACF;AAEO,eAAe,iBAAiB,EAAU,EAAE,IAAgC;IACjF,OAAO,MAAM,oHAAA,CAAA,SAAM,CAAC,UAAU,CAAC,MAAM,CAAC;QACpC,OAAO;YAAE;QAAG;QACZ,MAAM;YACJ,GAAG,IAAI;YACP,SAAS,KAAK,OAAO,IAAI;YACzB,kBAAkB,KAAK,gBAAgB,IAAI;YAC3C,UAAU,KAAK,QAAQ,IAAI;QAC7B;IACF;AACF;AAEO,eAAe,iBAAiB,EAAU;IAC/C,OAAO,MAAM,oHAAA,CAAA,SAAM,CAAC,UAAU,CAAC,MAAM,CAAC;QAAE,OAAO;YAAE;QAAG;IAAE;AACxD;;;IA7BsB;IAIA;IAWA;IAYA;;AA3BA,+OAAA;AAIA,+OAAA;AAWA,+OAAA;AAYA,+OAAA","debugId":null}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Public/Documents/AfrikaPharma/.next-internal/server/app/%28app%29/medications/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getExchangeRate as '004eb8556c154574de50fba8c3810b2bf3fb64eee6'} from 'ACTIONS_MODULE0'\nexport {updateExchangeRate as '60a419c87fe051efc32f9db0e329f4852b0371fb1c'} from 'ACTIONS_MODULE0'\nexport {createMedication as '4049141e5abfd565c8874134e5ef6f4bdb4c7b1fb5'} from 'ACTIONS_MODULE1'\nexport {updateMedication as '602480e638f4876cceb7b7b1b9ad32365f7ad8abfb'} from 'ACTIONS_MODULE1'\nexport {deleteMedication as '4038b080280fb5986b86cc2811dc6562e50b6cca09'} from 'ACTIONS_MODULE1'\n"],"names":[],"mappings":";AAAA;AAEA","debugId":null}},
    {"offset": {"line": 323, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Public/Documents/AfrikaPharma/src/components/medications/medications-list.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const MedicationsList = registerClientReference(\n    function() { throw new Error(\"Attempted to call MedicationsList() from the server but MedicationsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/medications/medications-list.tsx <module evaluation>\",\n    \"MedicationsList\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,kBAAkB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,iFACA","debugId":null}},
    {"offset": {"line": 337, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Public/Documents/AfrikaPharma/src/components/medications/medications-list.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const MedicationsList = registerClientReference(\n    function() { throw new Error(\"Attempted to call MedicationsList() from the server but MedicationsList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/medications/medications-list.tsx\",\n    \"MedicationsList\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,kBAAkB,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjD;IAAa,MAAM,IAAI,MAAM;AAA8O,GAC3Q,6DACA","debugId":null}},
    {"offset": {"line": 351, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Public/Documents/AfrikaPharma/src/components/medications/reference-medications-table.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const ReferenceMedicationsTable = registerClientReference(\n    function() { throw new Error(\"Attempted to call ReferenceMedicationsTable() from the server but ReferenceMedicationsTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/medications/reference-medications-table.tsx <module evaluation>\",\n    \"ReferenceMedicationsTable\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,4BAA4B,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC3D;IAAa,MAAM,IAAI,MAAM;AAAkQ,GAC/R,4FACA","debugId":null}},
    {"offset": {"line": 375, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Public/Documents/AfrikaPharma/src/components/medications/reference-medications-table.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const ReferenceMedicationsTable = registerClientReference(\n    function() { throw new Error(\"Attempted to call ReferenceMedicationsTable() from the server but ReferenceMedicationsTable is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/medications/reference-medications-table.tsx\",\n    \"ReferenceMedicationsTable\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,4BAA4B,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC3D;IAAa,MAAM,IAAI,MAAM;AAAkQ,GAC/R,wEACA","debugId":null}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 399, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Public/Documents/AfrikaPharma/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\n// Taux de change par défaut (utilisé en secours si aucun taux en base)\nexport const DEFAULT_USD_TO_CDF_RATE = 2400;\n\nexport function formatCurrency(amount: number, currency: 'CDF' | 'USD' = 'CDF', showCurrency = true) {\n  const formattedAmount = new Intl.NumberFormat('fr-CD', {\n    minimumFractionDigits: 0, // Pas de décimales pour les CDF\n    maximumFractionDigits: 0,\n  }).format(amount);\n\n  if (currency === 'CDF') {\n    return `${formattedAmount}${showCurrency ? ' CDF' : ''}`;\n  } else if (currency === 'USD') {\n    // Pour l'affichage en USD, on peut garder 2 décimales\n    const usdFormattedAmount = new Intl.NumberFormat('en-US', {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    }).format(amount);\n    return `${usdFormattedAmount}${showCurrency ? ' USD' : ''}`;\n  }\n  return formattedAmount;\n}\n\nexport function convertUsdToCdf(usdAmount: number, rate = DEFAULT_USD_TO_CDF_RATE): number {\n  return usdAmount * rate;\n}\n\nexport function convertCdfToUsd(cdfAmount: number, rate = DEFAULT_USD_TO_CDF_RATE): number {\n  return cdfAmount / rate;\n}"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,OAAI,AAAD,EAAE;AACtB;AAGO,MAAM,0BAA0B;AAEhC,SAAS,eAAe,MAAc,EAAE,WAA0B,KAAK,EAAE,eAAe,IAAI;IACjG,MAAM,kBAAkB,IAAI,KAAK,YAAY,CAAC,SAAS;QACrD,uBAAuB;QACvB,uBAAuB;IACzB,GAAG,MAAM,CAAC;IAEV,IAAI,aAAa,OAAO;QACtB,OAAO,GAAG,kBAAkB,eAAe,SAAS,IAAI;IAC1D,OAAO,IAAI,aAAa,OAAO;QAC7B,sDAAsD;QACtD,MAAM,qBAAqB,IAAI,KAAK,YAAY,CAAC,SAAS;YACxD,uBAAuB;YACvB,uBAAuB;QACzB,GAAG,MAAM,CAAC;QACV,OAAO,GAAG,qBAAqB,eAAe,SAAS,IAAI;IAC7D;IACA,OAAO;AACT;AAEO,SAAS,gBAAgB,SAAiB,EAAE,OAAO,uBAAuB;IAC/E,OAAO,YAAY;AACrB;AAEO,SAAS,gBAAgB,SAAiB,EAAE,OAAO,uBAAuB;IAC/E,OAAO,YAAY;AACrB","debugId":null}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Public/Documents/AfrikaPharma/src/app/%28app%29/medications/page.tsx"],"sourcesContent":["\nimport fs from 'fs/promises';\nimport path from 'path';\nimport { MedicationsList } from '@/components/medications/medications-list';\nimport { ReferenceMedicationsTable, type ReferenceMedication } from '@/components/medications/reference-medications-table';\nimport { getExchangeRate } from '@/lib/actions/exchange-rate';\nimport { DEFAULT_USD_TO_CDF_RATE } from '@/lib/utils';\n\nasync function loadReferenceMedications(): Promise<ReferenceMedication[]> {\n  try {\n  const csvPath = path.join(process.cwd(), 'Liste_de_500_M_dicaments.csv');\n    const content = await fs.readFile(csvPath, 'utf-8');\n    const lines = content.split('\\n').map((line) => line.trim()).filter(Boolean);\n    const dataLines = lines.slice(1); // remove header\n\n    return dataLines\n      .map((line, index) => {\n        const sanitized = line.replace(/\\r$/g, '');\n        const parts = sanitized.split(',').map((part) => part.trim());\n        if (parts.length < 5) {\n          return null;\n        }\n\n        const [name, price, expirationDate, form, stock] = parts;\n        return {\n          id: `ref-${index}`,\n          name,\n          price: Number(price) || 0,\n          expirationDate,\n          form,\n          stock: Number(stock) || 0,\n        } satisfies ReferenceMedication;\n      })\n      .filter((item): item is ReferenceMedication => Boolean(item));\n  } catch (error) {\n    console.error('Impossible de charger la liste de référence des médicaments:', error);\n    return [];\n  }\n}\n\nexport default async function MedicationsPage() {\n  const referenceMedications = await loadReferenceMedications();\n  const exchangeRateRecord = await getExchangeRate();\n  const exchangeRate = exchangeRateRecord?.rate ?? DEFAULT_USD_TO_CDF_RATE;\n\n  return (\n    <div className=\"space-y-6 p-4\">\n      <div>\n        <h1 className=\"text-2xl font-bold\">Gestion des Médicaments</h1>\n        <p className=\"text-muted-foreground text-sm\">\n          Consultez la liste de référence du marché puis gérez vos stocks applicatifs ci-dessous.\n        </p>\n      </div>\n      <ReferenceMedicationsTable data={referenceMedications} exchangeRate={exchangeRate} />\n      <MedicationsList exchangeRate={exchangeRate} />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AAEA,eAAe;IACb,IAAI;QACJ,MAAM,UAAU,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;QACvC,MAAM,UAAU,MAAM,qHAAA,CAAA,UAAE,CAAC,QAAQ,CAAC,SAAS;QAC3C,MAAM,QAAQ,QAAQ,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,OAAS,KAAK,IAAI,IAAI,MAAM,CAAC;QACpE,MAAM,YAAY,MAAM,KAAK,CAAC,IAAI,gBAAgB;QAElD,OAAO,UACJ,GAAG,CAAC,CAAC,MAAM;YACV,MAAM,YAAY,KAAK,OAAO,CAAC,QAAQ;YACvC,MAAM,QAAQ,UAAU,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,OAAS,KAAK,IAAI;YAC1D,IAAI,MAAM,MAAM,GAAG,GAAG;gBACpB,OAAO;YACT;YAEA,MAAM,CAAC,MAAM,OAAO,gBAAgB,MAAM,MAAM,GAAG;YACnD,OAAO;gBACL,IAAI,CAAC,IAAI,EAAE,OAAO;gBAClB;gBACA,OAAO,OAAO,UAAU;gBACxB;gBACA;gBACA,OAAO,OAAO,UAAU;YAC1B;QACF,GACC,MAAM,CAAC,CAAC,OAAsC,QAAQ;IAC3D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gEAAgE;QAC9E,OAAO,EAAE;IACX;AACF;AAEe,eAAe;IAC5B,MAAM,uBAAuB,MAAM;IACnC,MAAM,qBAAqB,MAAM,CAAA,GAAA,yIAAA,CAAA,kBAAe,AAAD;IAC/C,MAAM,eAAe,oBAAoB,QAAQ,mHAAA,CAAA,0BAAuB;IAExE,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,8OAAC;wBAAE,WAAU;kCAAgC;;;;;;;;;;;;0BAI/C,8OAAC,sKAAA,CAAA,4BAAyB;gBAAC,MAAM;gBAAsB,cAAc;;;;;;0BACrE,8OAAC,wJAAA,CAAA,kBAAe;gBAAC,cAAc;;;;;;;;;;;;AAGrC","debugId":null}}]
}